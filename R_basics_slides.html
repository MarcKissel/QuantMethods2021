<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R basics</title>
    <meta charset="utf-8" />
    <meta name="date" content="2021-02-04" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# R basics
### 
### 2021-02-04

---





name: intro_slide
class: center, middle
#Why use R

## - It is more than just a way to run statistics. you can make nice figures, run computer simulations, create interactive apps, and even make a website!

## - difference between a car and a bus

---
name: day_overview

# Today we are going to go over some of this week's hw 

## basics
## How R thinks
## Classes and the dreaded factors



---
name: weeks_work

# This week's work

## first R hw
## work on getting dataset
## make comments on articles



---
name: getting_help

# No one knows everything about R. i often Google the same issue many times since i forget.  A great place to look for help is Stack Overflow

https://stackoverflow.com/questions/tagged/r

---
name: setup

#Working with R

## The *console* is where commands are run. you can write something in the console to speak directly to R, or write in the *source* and then send the script to the console. You can recognize the console since every lines starts with a '&gt;'

--

go to the console and type the following and then hit enter


```r
7 + 6
```

---
you should see something like this:

&gt; 7 + 6
[1] 13

note the [1], which tells you the line #. this becomes useful later on. also note it told you that 7 + 6 = 13. congrats! you just turned your expensive computer into a $5 calulator

---
name: how_R_thinks

###Short overview of how R works

###One way that i think about R that helps me to work it is to remember that everything in R is an "object."  we make objects (or  assign values to objects) and then do things to these objects.  

###for example check out the code below


```r
a &lt;- 4
```

what this says is that we are going to create the object 'a' and then assign the value '4' to it. if you run the code in R Studio you will see that the 'environment'  panel now lists 'a' and gives its value. 
**the arrow shortcut key for a pc is "alt" +  "-"". For a mac it is "Option" + "-"**


---

### **protip:**

When you assign values to objects, be aware that not all names are possible. R reserves some names for special functions. here are the rules

1. Can use letters/numbers, But has to start with letter (impt for when you import data). 
2. no spaces, so use CamelCase or Snake_case  

**to store more than one element in an object we need to remember a trick**

if you want to make a series of numbers, characters, whatever, you need to use a special sequence. to do this, we must combine the values we want to assign with the c function, which combines values into a vector or list


```r
my_list &lt;- c(1,2,3,4,5)
my_list_2 &lt;- c("my_name", "my_address", "my_number")
```



```r
b &lt;- "my name"
c &lt;- FALSE
d &lt;- c(1,2,3.0,4)
```

---
# what's your vector?

The thing you need to know most about vectors is that you are able to index them. Use square brackets to specify that you are indexing. Since a vector is one dimensional, you only need a singe index.

See this weeks homework for more on this


---
# more on vectors


```r
v1 &lt;- c(1,2,3,4)
v2 &lt;- c(5,6,7,8)
v1 + v2
v1 - v2
v1 * v2
v1 / v2
v3 &lt;- v2 + v2
```

recycling 


```r
v1 &lt;- c(1,3,5,1,5)
v2 &lt;- c(1,2)
v3 &lt;- v1 + v2
```

---
# vector indicies 


```r
vowels &lt;- c("a", "e", "i", "o", "u")
vowels[2]
```

```
## [1] "e"
```

---
# data frame

A data frame acts like a table, w/ data organized into rows and columns (they are techincally lists where each element is a vector of the same length)


```r
mtcars
```

```
##                      mpg cyl  disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4           21.0   6 160.0 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag       21.0   6 160.0 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710          22.8   4 108.0  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive      21.4   6 258.0 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout   18.7   8 360.0 175 3.15 3.440 17.02  0  0    3    2
## Valiant             18.1   6 225.0 105 2.76 3.460 20.22  1  0    3    1
## Duster 360          14.3   8 360.0 245 3.21 3.570 15.84  0  0    3    4
## Merc 240D           24.4   4 146.7  62 3.69 3.190 20.00  1  0    4    2
## Merc 230            22.8   4 140.8  95 3.92 3.150 22.90  1  0    4    2
## Merc 280            19.2   6 167.6 123 3.92 3.440 18.30  1  0    4    4
## Merc 280C           17.8   6 167.6 123 3.92 3.440 18.90  1  0    4    4
## Merc 450SE          16.4   8 275.8 180 3.07 4.070 17.40  0  0    3    3
## Merc 450SL          17.3   8 275.8 180 3.07 3.730 17.60  0  0    3    3
## Merc 450SLC         15.2   8 275.8 180 3.07 3.780 18.00  0  0    3    3
## Cadillac Fleetwood  10.4   8 472.0 205 2.93 5.250 17.98  0  0    3    4
## Lincoln Continental 10.4   8 460.0 215 3.00 5.424 17.82  0  0    3    4
## Chrysler Imperial   14.7   8 440.0 230 3.23 5.345 17.42  0  0    3    4
## Fiat 128            32.4   4  78.7  66 4.08 2.200 19.47  1  1    4    1
## Honda Civic         30.4   4  75.7  52 4.93 1.615 18.52  1  1    4    2
## Toyota Corolla      33.9   4  71.1  65 4.22 1.835 19.90  1  1    4    1
## Toyota Corona       21.5   4 120.1  97 3.70 2.465 20.01  1  0    3    1
## Dodge Challenger    15.5   8 318.0 150 2.76 3.520 16.87  0  0    3    2
## AMC Javelin         15.2   8 304.0 150 3.15 3.435 17.30  0  0    3    2
## Camaro Z28          13.3   8 350.0 245 3.73 3.840 15.41  0  0    3    4
## Pontiac Firebird    19.2   8 400.0 175 3.08 3.845 17.05  0  0    3    2
## Fiat X1-9           27.3   4  79.0  66 4.08 1.935 18.90  1  1    4    1
## Porsche 914-2       26.0   4 120.3  91 4.43 2.140 16.70  0  1    5    2
## Lotus Europa        30.4   4  95.1 113 3.77 1.513 16.90  1  1    5    2
## Ford Pantera L      15.8   8 351.0 264 4.22 3.170 14.50  0  1    5    4
## Ferrari Dino        19.7   6 145.0 175 3.62 2.770 15.50  0  1    5    6
## Maserati Bora       15.0   8 301.0 335 3.54 3.570 14.60  0  1    5    8
## Volvo 142E          21.4   4 121.0 109 4.11 2.780 18.60  1  1    4    2
```


---
### making a dataframe


```r
name &lt;- c("Harper", "Sutton", "Jenna")
age &lt;- c("9","6", "38")
favorite_color &lt;- c("green", "pink", "purple")
favorite_food &lt;- c("chicken", "sushi", "potato")
my_data &lt;- data.frame(name, age, favorite_color, favorite_food)
print(my_data)
```

```
##     name age favorite_color favorite_food
## 1 Harper   9          green       chicken
## 2 Sutton   6           pink         sushi
## 3  Jenna  38         purple        potato
```

#### looking at dataframe

```r
my_data$name
nrow(my_data)
ncol(my_data)
dim(my_data)
head(my_data)
View(my_data)
```


---
# functions

once you assign something (e.g., a value, a list of numbers, a character vector) to a object you can interact with that object. We do this by using what is called a function.  


```r
d &lt;- c(1,2,3.0,4)
sum(d)
mean(d)
mean(d, na.rm = FALSE) #doesn't change result since we have no NAs yet
e &lt;- c(1,2,3,4,NA,5)
mean(e)
mean(e, na.rm = TRUE)
seq(from = 1, to = 10, by =2)
```


if you need help on a function, you can type a question mark before its name like this:
?mean()

---
# class

Once you have an object stored, you can interact with it. but remember that the way you interact with it via  functions depends on its class....

the way in which you can interact with the object is based on the *class* of the object. The class of the object is assigned  by R based on what it thinks the object is supposed to be.

[live examples]

---
#### more on class

```r
my_list &lt;- c(1,2,3,4,5)
my_list_2 &lt;- c("my_name", "my_address", "my_number")

length(my_list)
length(my_list_2)
sum(my_list)
my_list[4] #gets the 4 value.
#sum(my_list_2) #this kicks back an error
```

running the second line gives  you a message like this:

"Error in sum(my_list_2) : invalid 'type' (character) of argument"

what this means is that the 'type' or 'class' of the object is not something that the sum function knows what to do with. learning how to read R errors is useful. if  you don't know whatthe error means, copying part of it and searching Google is a pretty good way to find help. 


(short digression: one of the things about R that makes it easier to use is that many of the functions work by first checking out the class of the object you are asking it to work on. What this means is that the same function can be applied to different types of classes. This doesn't really affect much now, but as you investigate R more you can see how this works.)


---
# class types

##some class types

lgl stands for logical, vectors that contain only TRUE or FALSE.
int stands for integers. can't take decimals
dbl stands for doubles, or real numbers.
chr stands for character vectors, or strings.
factor are categorical data

---
### packages

R comes with many functions. but what makes it super powerful is that people can add to these functions by writing their own. a bunch of functions bundled together is called a package. You are going to find lot of useful ones. to install a package in R we use the function "install.packages," which has the argument the name of the package.

install.packages("name_of_package") #install a package
library(name_of_package) #load the package for your session

you only have to install a package once, but **everytime you reopen R you have to reload the pacakage with the library function**

---


```r
library(tidyverse)
```

in the case of this package, R tells us what is being loaded and also that there are some conflicts. we can usually ignore these, but basically it just says that some functions from this new package have the same name as functions from the base R package. Good to pay attention to but usually not a huge problem unless you are doing a lot of things in one script

---

Here is a short piece of code that should make some sense. it calls a function ggplot (part of the tidyverse package), and then makes a plot. then ggsave saves the new plot as a pdf in the working directory of  the project folder. 
the last line takes the data set that was used (diamonds) and write as CSV file for that. 


```r
ggplot(diamonds, aes(carat, price)) + 
  geom_point()
ggsave("diamondPlot.pdf")
write_csv(diamonds, "diamonds3.csv")
```

---

# getting data into R

 Probably the hardest part of starting to use R is getting your data into R and then being able to work with it fluidly. This has gotten easier over time but still can be tricky. For me, the biggest hurdles are 
 1. getting the file in a good format
 2. making sure that when it is read into R all of the data is being read correctly by R

---

##using readr

the readr package is part of the tidyverse package. One of the points of the tidyverse is  to try to make things consistent. here are some of the functions to read data into R 


read_csv #comma separated values

read_csv2() #semicolons

read_fwf() #fixed width

For all of these the first argument is the file name. other arguments can be used to if need be. for example
 col_names = FALSE if no headers to your data (uncommon)

What is nice about read_csv etc  is that it tells you what it
**thinks** that class of each column is

---

# the dreaded Factors

one of  the biggest problem is dealing with factors. factors are categorical data. in the old days R used to import any string as a factor. This caused some problems! now, readr fixes this. But we still need to be aware of how factors work.

---


```r
#make vector
shirt_sizes &lt;- c("small", "medium", "small", "large", "medium", "large")
#turn into factors
shirt_sizes_factor &lt;-as.factor(shirt_sizes)
print(shirt_sizes_factor)

shirt_sizes_factor_leveled &lt;- factor(shirt_sizes, levels = c("small", "medium", "large"))
```




    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
